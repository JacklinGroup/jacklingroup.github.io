{{ define "main" }}
  <h1>{{ .Title }}</h1>

  <!-- 搜索和筛选功能 -->
  <div class="tutorial-filters">
    <!-- 关键字搜索 -->
    <input type="text" id="searchInput" placeholder="Search tutorials..." onkeyup="filterTutorials()" />

    <!-- 类别筛选 -->
    <select id="categoryFilter" onchange="filterTutorials()">
      <option value="All">All Categories</option>
      <option value="Writing">Writing</option>
      <option value="Tools">Tools</option>
      <option value="Competitions">Competitions</option>
    </select>

    <!-- 日期筛选 -->
    <select id="dateFilter" onchange="filterTutorials()">
      <option value="All">All Dates</option>
      {{ range .Pages }}
        <option value="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "Jan 2, 2006" }}</option>
      {{ end }}
    </select>
  </div>

  <!-- 渲染教程列表 -->
  <div class="tutorial-list">
    {{ range .Pages }}
      <div class="tutorial-item" data-category="{{ .Params.category }}" data-date="{{ .Date.Format "2006-01-02" }}">
        <h2><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
        <p>{{ .Summary }}</p>
        <p><strong>{{ .Params.author }}</strong> | {{ .Date.Format "Jan 2, 2006" }} | {{ .Params.category }}</p>
      </div>
    {{ end }}
  </div>

  <!-- 筛选功能的 JavaScript -->
  <script>
    function filterTutorials() {
      var searchTerm = document.getElementById("searchInput").value.toLowerCase();
      var category = document.getElementById("categoryFilter").value;
      var date = document.getElementById("dateFilter").value;
      var tutorials = document.querySelectorAll(".tutorial-item");

      tutorials.forEach(function (tutorial) {
        var title = tutorial.querySelector("a").textContent.toLowerCase();
        var tutorialCategory = tutorial.getAttribute("data-category");
        var tutorialDate = tutorial.getAttribute("data-date");

        // 判断搜索内容是否匹配
        var matchesSearch = title.includes(searchTerm);

        // 判断类别是否匹配
        var matchesCategory = category === "All" || tutorialCategory === category;

        // 判断日期是否匹配
        var matchesDate = date === "All" || tutorialDate === date;

        // 显示/隐藏教程项
        if (matchesSearch && matchesCategory && matchesDate) {
          tutorial.style.display = "block";  // 显示
        } else {
          tutorial.style.display = "none";  // 隐藏
        }
      });
    }
  </script>

{{ end }}
